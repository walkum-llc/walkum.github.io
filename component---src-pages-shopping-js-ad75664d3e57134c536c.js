"use strict";(self.webpackChunkwalkum=self.webpackChunkwalkum||[]).push([[87],{4824:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var a={};n.r(a),n.d(a,{b:function(){return c},V:function(){return o},$1:function(){return m},AS:function(){return u},tv:function(){return i},_R:function(){return s},jE:function(){return d},DT:function(){return E}});var l=n(6540),r=n(1468),c="shopping-module--closeButton--fdfa2",o="shopping-module--fullScreenImage--3e206",m="shopping-module--fullScreenModal--d5a88",u="shopping-module--item--7b82f",i="shopping-module--itemImage--78d3d",s="shopping-module--itemList--d6d43",d="shopping-module--modalContent--12e4c",E="shopping-module--removeButton--04c91",p=n(9446);var h=e=>{let{item:t,onClose:n,handleToggle:a,handleQuantityChange:r,isInCart:u,cart:i}=e;const s=i.find((e=>e.id===t.id)),p=s?s.quantity:1,{0:h,1:g}=(0,l.useState)(p);return(0,l.useEffect)((()=>{const e=e=>{"Escape"===e.key&&n()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[n]),l.createElement("div",{className:m,onClick:n},l.createElement("div",{className:d,onClick:e=>e.stopPropagation()},l.createElement("button",{className:c,onClick:n},"Ã— Close"),l.createElement("img",{src:t.image,alt:t.name,className:o}),l.createElement("h3",null,t.name),l.createElement("p",null,t.description),l.createElement("p",null,"Price: $",t.price),l.createElement("p",null,"Stock: ",t.stock),u(t.id)&&l.createElement("div",null,l.createElement("label",{htmlFor:"quantityInput"},"Quantity: "),l.createElement("input",{id:"quantityInput",type:"number",value:h,onChange:e=>{const n=Math.min(Math.max(parseInt(e.target.value,10),1),t.stock);g(n),r(t,n)},min:"1",max:t.stock})),l.createElement("button",{onClick:()=>a(t),className:u(t.id)?E:"",disabled:t.stock<=0},u(t.id)?"Remove from Cart":"Add to Cart")))};var g=()=>{const e=(0,r.wA)(),t=(0,r.d4)(p.VH),n=(0,r.d4)((e=>e.onlineStore.storeItems)),{0:a,1:c}=(0,l.useState)(null),o=t=>{e((0,p.ZT)(t))},m=(t,n)=>{e((0,p._V)({id:t.id,quantity:parseInt(n,10)}))},d=e=>t.some((t=>t.id===e));return l.createElement("div",{className:s},n.map(((e,n)=>{const a=t.find((t=>t.id===e.id)),r=a?a.quantity:1;return l.createElement("div",{key:n,className:u,onClick:()=>(e=>{c(e)})(e)},l.createElement("img",{src:e.image,alt:e.name,className:i,width:100,height:100}),l.createElement("h3",null,e.name),l.createElement("p",null,e.description),l.createElement("p",null,"$",e.price),l.createElement("p",null,"# Remaining: ",e.stock),d(e.id)?l.createElement("button",{onClick:t=>{t.stopPropagation(),o(e)},className:E},"Remove from Cart"):l.createElement("button",{onClick:t=>{t.stopPropagation(),o(e)},disabled:e.stock<=0},"Add to Cart"),d(e.id)&&l.createElement("div",null,l.createElement("label",null,"Quantity: "),l.createElement("input",{type:"number",value:r,onChange:t=>m(e,t.target.value),min:"1",max:e.stock,onClick:e=>e.stopPropagation()})))})),a&&l.createElement(h,{item:a,onClose:()=>{c(null)},handleToggle:o,handleQuantityChange:m,cart:t,isInCart:d}))};var C=()=>{const e=(0,r.wA)(),t=(0,r.d4)(p.VH);return t&&0!==t.length?l.createElement("div",{className:a.cart},l.createElement("h2",null,"Your Cart"),l.createElement("table",{className:a.cartTable},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,"Item"),l.createElement("th",null,"Price"),l.createElement("th",null,"Quantity"),l.createElement("th",null,"Total"),l.createElement("th",null,"Remove"))),l.createElement("tbody",null,t.map(((t,n)=>{const a=Number(t.price)||0,r=Number(t.quantity)||0,c=a*r;return l.createElement("tr",{key:n},l.createElement("td",null,t.name||"Unnamed Item"),l.createElement("td",null,"$",a.toFixed(2)),l.createElement("td",null,l.createElement("input",{type:"number",value:r,onChange:n=>((t,n)=>{const a=Math.max(1,Math.min(n,t.stock));e((0,p._V)({id:t.id,quantity:a}))})(t,parseInt(n.target.value,10)),min:"1",max:t.stock})),l.createElement("td",null,"$",c.toFixed(2)),l.createElement("td",null,l.createElement("button",{onClick:()=>(t=>{e((0,p.ZT)(t))})(t),className:E},"Remove")))})))),l.createElement("h3",{className:a.grandTotal},"Grand Total: $",t.reduce(((e,t)=>e+(Number(t.price)||0)*(Number(t.quantity)||0)),0).toFixed(2))):l.createElement("p",{className:a.emptyCartMessage},"Your cart is empty!")},f=n(8272);const v=e=>{const t=e.trim().split("\n"),n=t.shift().split(",").map((e=>e.replace(/(^"|"$)/g,"")));return t.map((e=>{const t=e.split(",").map((e=>e.replace(/(^"|"$)/g,""))),a={};return n.forEach(((e,n)=>{e&&(a[e]=t[n]||null)})),a}))};var k=()=>{const e=(0,r.wA)(),t=(0,r.d4)(p.dX);(0,l.useEffect)((()=>{(async()=>{const t=await(async e=>{const t=`https://docs.google.com/spreadsheets/d/${f.SPREADSHEET_ID_PRODUCTS}/gviz/tq?tqx=out:csv&sheet=${e}`;try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.text();return v(n)}catch(n){return console.error(`Error fetching spreadsheet data from sheet "${e}":`,n),[]}})(f.PRODUCTS_SHEETNAME);e((0,p.Bl)(t)),e((0,p.q_)())})()}),[e]);return l.createElement("div",null,l.createElement("h1",null,"Shopping Page"),l.createElement("button",{className:a.cartToggleButton,onClick:()=>{e((0,p.ss)())}},t?"Hide Cart":"View Cart"),t&&l.createElement(C,null),l.createElement("div",{className:a.itemListContainer},l.createElement(g,null)))};var b=()=>l.createElement(k,null)},8272:function(e){e.exports=JSON.parse('{"SPREADSHEET_ID_SOURPATCHBAKERY":"1HHIb_HfGZ3Ui8GBTTJ4DplXtpVW-9BwHSwmchVNSiIA","SPREADSHEET_ID_RESTAURANT":"1OHQbtAt5JqttftgnGd3PVNaR44vbqjb3tcxluLHXIa8","SPREADSHEET_ID_PRODUCTS":"1Y825bTozBNpQFz3rZNCtHkACbSbOO9W48L3_01QuLQY","PRODUCTS_SHEETNAME":"products"}')}}]);
//# sourceMappingURL=component---src-pages-shopping-js-ad75664d3e57134c536c.js.map